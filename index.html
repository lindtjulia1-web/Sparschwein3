<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>KGB Piggy Bank Pro Editor - Full Custom</title>
    <style>
        :root { --accent: #f9e076; --bg: #1e1e24; --panel: #2a2a32; --border: #3d3d45; --green: #4caf50; --red: #f44336; }
        body { font-family: 'Segoe UI', sans-serif; background: #000; color: #fff; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        .sidebar { width: 400px; background: var(--panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; z-index: 10; }
        .sidebar-content { flex: 1; overflow-y: auto; padding: 20px; }
        h2 { color: var(--accent); font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; margin: 20px 0 10px; border-left: 3px solid var(--accent); padding-left: 10px; }
        h3 { font-size: 13px; color: var(--accent); margin: 20px 0 10px; display: flex; align-items: center; justify-content: space-between; }
        .card { background: rgba(0,0,0,0.2); border: 1px solid var(--border); padding: 12px; border-radius: 15px; margin-bottom: 20px; }
        label { display: block; font-size: 10px; color: #aaa; text-transform: uppercase; margin-top: 8px; }
        input, select, textarea { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 8px; border-radius: 8px; margin-top: 4px; box-sizing: border-box; outline: none; font-size: 13px; }
        .btn { border: none; padding: 14px; width: 100%; border-radius: 12px; cursor: pointer; font-weight: bold; margin-top: 10px; transition: 0.3s; }
        .btn-main { background: #ffb347; color: #000; } 
        .btn-code { background: #77dd77; color: #000; } 
        .preview { flex: 1; background: #0c0c0e; display: flex; align-items: center; justify-content: center; padding: 40px; }
        #device-wrapper { position: relative; transition: 0.3s; background: #000; border-radius: 30px; }
        iframe { width: 100%; height: 100%; border: none; display: block; border-radius: 30px; }
        .color-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        #code-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; z-index: 100; flex-direction: column; }
        #result-code { width: 80%; height: 50%; background: #111; color: var(--accent); padding: 20px; border: 1px solid var(--accent); border-radius: 20px; }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="sidebar-content">
        <h2>1. Настройки Экрана</h2>
        <div class="color-grid">
            <div><label>Ширина</label><input type="number" id="width" value="800"></div>
            <div><label>Высота</label><input type="number" id="height" value="450"></div>
        </div>
        <label>Фон (URL)</label><input type="text" id="bg-url" placeholder="URL картинки">
        <label>Громкость эффектов</label>
        <input type="range" id="volume" min="0" max="1" step="0.1" value="0.5">

        <h2>2. Язык и Шрифты</h2>
        <select id="lang-select" onchange="applyLang()">
            <option value="ru">Русский</option>
            <option value="de">Deutsch</option>
            <option value="en">English</option>
            <option value="fr">Français</option>
        </select>
        <label>Шрифт</label>
        <select id="font-family">
            <option value="Segoe UI">Segoe UI</option>
            <option value="Indie Flower">Indie Flower</option>
            <option value="Jolly Lodger">Jolly Lodger</option>
            <option value="Metrophobic">Metrophobic</option>
            <option value="ABeeZee">ABeeZee</option>
            <option value="Abril Fatface">Abril Fatface</option>
            <option value="Aclonica">Aclonica</option>
        </select>

        <h2>3. Тексты</h2>
        <label>Заголовок</label><input type="text" id="start-title" value="Сокровища Пирата">
        <label>Кнопка Старт</label><input type="text" id="start-btn-text" value="В БОЙ">
        <label>Ставка (Stake)</label><input type="text" id="stake-text" value="ВЫБЕРИ СТАВКУ:">
        <label>Фитбек (Победа)</label><input type="text" id="win-text" value="ЗОЛОТО ВАШЕ!">
        <label>Кнопка Финала</label><input type="text" id="final-btn-text" value="ЗАНОВО">

        <h2>4. Цвета и Дизайн</h2>
        <div class="color-grid">
            <div><label>Текст</label><input type="color" id="text-color" value="#f9e076"></div>
            <div><label>Рамка</label><input type="color" id="neon-color" value="#f9e076"></div>
        </div>
        <div class="color-grid">
            <div><label>Кнопки</label><input type="color" id="btn-color" value="#f9e076"></div>
            <div><label>Фон Вопроса</label><input type="color" id="q-bg-color" value="#333333"></div>
        </div>

        <h2>5. Параметры кнопок</h2>
        <label>Размер шрифта (%)</label><input type="range" id="fontSize" min="2" max="8" step="0.1" value="3.5">
        <div class="color-grid">
            <div><label>Высота кн.</label><input type="number" id="btn-height" value="9"></div>
            <div><label>Gap (отступ)</label><input type="number" id="btn-gap" value="2"></div>
        </div>
        <label>Отступ от краев (vmin)</label><input type="number" id="btn-padding" value="8">

        <h2>Уровни</h2>
        <div id="levels-container"></div>
    </div>
    <div style="padding: 20px; border-top: 1px solid var(--border);">
        <button class="btn btn-main" onclick="updatePreview()">ОБНОВИТЬ ПРЕВЬЮ</button>
        <button class="btn btn-code" onclick="getGeniallyCode()">ПОЛУЧИТЬ КОД</button>
    </div>
</div>

<div class="preview">
    <div id="device-wrapper"><iframe id="ifr"></iframe></div>
</div>

<div id="code-modal">
    <textarea id="result-code" readonly></textarea>
    <button class="btn" onclick="document.getElementById('code-modal').style.display='none'" style="width: 200px; background:#fff;">ЗАКРЫТЬ</button>
</div>

<script>
const GITHUB_RAW = "https://raw.githubusercontent.com/lindtjulia1-web/Sparschwein1/main/";

const langData = {
    ru: { title: "Сокровища Пирата", start: "В БОЙ", stake: "ВЫБЕРИ СТАВКУ:", win: "ЗОЛОТО ВАШЕ!", final: "ЗАНОВО" },
    de: { title: "Piratenschatz", start: "START", stake: "EINSATZ WÄHLEN:", win: "DU HAST GEWONNEN!", final: "NEUSTART" },
    en: { title: "Pirate Treasure", start: "FIGHT", stake: "CHOOSE STAKE:", win: "VICTORY IS YOURS!", final: "RESTART" },
    fr: { title: "Trésor Pirate", start: "JOUER", stake: "CHOISIR MISE:", win: "L'OR EST À VOUS!", final: "RECOMMENCER" }
};

function applyLang() {
    const d = langData[document.getElementById('lang-select').value];
    document.getElementById('start-title').value = d.title;
    document.getElementById('start-btn-text').value = d.start;
    document.getElementById('stake-text').value = d.stake;
    document.getElementById
