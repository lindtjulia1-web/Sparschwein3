function spawnCoins(num, isFinal) {
            for(let i=0; i<num; i++) {
                setTimeout(() => {
                    const c = document.createElement('div'); 
                    c.className = 'falling-coin';
                    
                    const randomRot = Math.floor(Math.random() * 1440) - 720; 
                    const randomScale = (Math.random() * 0.8 + 0.3).toFixed(2);
                    
                    // ИСПРАВЛЕНИЕ: Если не финал, монеты падают кучно в центре (где свинья)
                    // Если финал — разлетаются по всему экрану (0-100%)
                    const randomLeft = isFinal 
                        ? (Math.random() * 110 - 5) 
                        : (Math.random() * 20 + 40); // Центровка 40-60% ширины
                    
                    const randomDuration = (Math.random() * 1.2 + (isFinal ? 2.5 : 2.0)).toFixed(2);
                    
                    // Эффект глубины
                    const isBackLayer = Math.random() > 0.5;
                    c.style.zIndex = isBackLayer ? 10 : 70;
                    if(isBackLayer) c.style.filter = "blur(1px) brightness(0.8)"; 

                    c.style.setProperty('--rot', randomRot + 'deg');
                    c.style.setProperty('--sc', randomScale);
                    c.style.left = randomLeft + '%';
                    
                    c.style.animation = 'fallImproved ' + randomDuration + 's cubic-bezier(.37,0,.63,1) forwards';
                    document.body.appendChild(c);
                    
                    const s = (isFinal && i === 0) ? finalSnd.cloneNode() : coinSnd.cloneNode();
                    s.volume = cfg.vol; 
                    s.play();
                    
                    const p = document.getElementById('pig-wrap');
                    if(!isFinal) p.classList.add('shake-anim');
                    
                    setTimeout(() => { 
                        c.remove(); 
                        if(!isFinal) p.classList.remove('shake-anim'); 
                    }, randomDuration * 1000);
                }, i * (isFinal ? 40 : 180));
            }
        }
